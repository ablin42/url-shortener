{"version":3,"sources":["components/HomeBtn.tsx","components/ShortenRoute.tsx","components/Toggler.tsx","components/ShortenForm.tsx","App.tsx","index.tsx"],"names":["HomeBtn","action","className","aria-hidden","Shortened","id","longUrl","shortUrl","handleClipboard","e","preventDefault","value","document","querySelector","tooltip","classList","contains","add","setTimeout","remove","tempInput","createElement","body","appendChild","select","execCommand","removeChild","copyClipboard","data-clipboard","onClick","href","target","rel","type","FetchShortened","useState","_id","urlCode","date","createdAt","updatedAt","__v","state","setState","useParams","a","url","axios","get","response","data","window","location","useEffect","loadUrlData","length","ShortenRoute","match","useRouteMatch","exact","path","to","Toggler","isDarkMode","darkThemeSelected","localStorage","getItem","checkbox","checked","documentElement","setAttribute","removeAttribute","transitionTheme","onChange","setItem","removeItem","name","htmlFor","ShortenForm","errorMsg","checkErrors","errMsg","validUrl","isWebUri","trim","btn","style","opacity","transform","method","onSubmit","post","then","console","log","catch","error","placeholder","required","NotFound","App","component","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"2PAceA,MAVf,WACE,OACE,0BAAMC,OAAO,KACX,4BAAQC,UAAU,WAChB,uBAAGA,UAAU,oBAAoBC,cAAY,Y,iDC0BrD,SAASC,EAAT,GAA0D,IAArCC,EAAoC,EAApCA,GAAIC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,SAChC,SAASC,EAAgBC,GACvBA,EAAEC,iBACF,IACIC,EADSC,SAASC,cAAc,YACjBF,MACfG,EAAUF,SAASC,cAAc,gBAEjCC,IAAYA,EAAQC,UAAUC,SAAS,qBACzCF,EAAQC,UAAUE,IAAI,eACtBH,EAAQC,UAAUE,IAAI,mBACtBC,YAAW,WACLJ,IACFA,EAAQC,UAAUI,OAAO,mBACzBL,EAAQC,UAAUI,OAAO,kBAE1B,MAMP,SAAuBR,GACrB,IAAIS,EAAYR,SAASS,cAAc,SACvCD,EAAUT,MAAQA,EAElBC,SAASU,KAAKC,YAAYH,GAC1BA,EAAUI,SACVZ,SAASa,YAAY,QACrBb,SAASU,KAAKI,YAAYN,GAV1BO,CAAchB,GAahB,OACE,yBAAKT,UAAU,iBACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,WACb,wBAAI0B,iBAAe,GAAGC,QAASrB,GAA/B,qBAGA,uBAAGoB,iBAAe,GAAGC,QAASrB,EAAiBsB,KAAK,OAClD,uBAAG5B,UAAU,iBAGf,0BAAMA,UAAU,eAAhB,aAGJ,uBACE6B,OAAO,SACPD,KAAMxB,EACN0B,IAAI,sBACJ9B,UAAU,2BAJZ,aAMaG,GAEb,2BAAO4B,KAAK,SAAStB,MAAO,UAAYJ,EAAUF,GAAG,YAErD,kBAAC,EAAD,OAKN,SAAS6B,IAAkB,IAAD,EACEC,mBAAoB,CAC5CC,IAAK,GACL9B,QAAS,GACTC,SAAU,GACV8B,QAAS,GACTC,KAAM,GACNC,UAAW,GACXC,UAAW,GACXC,IAAK,IATiB,mBACjBC,EADiB,KACVC,EADU,KAWlBtC,EAAOuC,cAAPvC,GAXkB,4CAaxB,8BAAAwC,EAAA,sEAEQC,EAAM,YAAczC,EAF5B,SAG2B0C,IAAMC,IAAIF,GAHrC,OAGUG,EAHV,OAKIN,EAASM,EAASC,MALtB,gDAOIC,OAAOC,SAAStB,KAAO,IAP3B,0DAbwB,sBA4BxB,OAJAuB,qBAAU,YAxBc,mCAyBtBC,KACC,CAACjD,IAEGqC,EAAMN,IAAImB,OACf,kBAACnD,EAAD,CACEC,GAAIqC,EAAMN,IACV9B,QAASoC,EAAMpC,QACfC,SAAUmC,EAAMnC,WAGlB,yBAAKL,UAAU,aACb,wBAAIA,UAAU,IAAd,eAoBSsD,MAff,WACE,IAAIC,EAAQC,cAEZ,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAI,UAAKH,EAAMX,IAAX,SACf,kBAACZ,EAAD,OAEF,kBAAC,IAAD,CAAO0B,KAAMH,EAAMG,MACjB,kBAAC,IAAD,CAAUC,GAAG,SC1FNC,MAnDf,WAAoB,IAAD,EACS3B,mBAAS,CAAE4B,YAAY,IADhC,mBACVrB,EADU,KACHC,EADG,KAGjBU,qBAAU,WACR,IAAIW,EACsC,OAAxCC,aAAaC,QAAQ,gBACmB,SAAxCD,aAAaC,QAAQ,eACnBC,EAAWvD,SAASC,cACtB,qBAEEsD,IAAUA,EAASC,QAAUJ,GAEjCA,EACIpD,SAASyD,gBAAgBC,aAAa,aAAc,QACpD1D,SAASyD,gBAAgBE,gBAAgB,iBAG/C,IAAIC,EAAkB,WACpB5D,SAASyD,gBAAgBtD,UAAUE,IAAI,cACvCkC,OAAOjC,YAAW,WAChBN,SAASyD,gBAAgBtD,UAAUI,OAAO,gBACzC,MAiBL,OACE,yBAAKjB,UAAU,oBACb,2BACEuE,SAjBN,WACE9B,EAAS,CAAEoB,YAAarB,EAAMqB,aAE1BrB,EAAMqB,YACRS,IACAP,aAAaS,QAAQ,cAAe,QACpC9D,SAASyD,gBAAgBC,aAAa,aAAc,UAEpDE,IACAP,aAAaU,WAAW,eACxB/D,SAASyD,gBAAgBC,aAAa,aAAc,WAQlDrC,KAAK,WACL5B,GAAG,UACHuE,KAAK,UAEP,2BAAOC,QAAQ,WAAf,Y,iBCuCSC,MAnFf,WAAwB,IAAD,EACK3C,mBAAS,CAAExB,MAAO,GAAIoE,SAAU,KADrC,mBACdrC,EADc,KACPC,EADO,cAGNqC,EAHM,8EAGrB,WAA2BrE,GAA3B,eAAAkC,EAAA,6DACMoC,EAAS,GAETtE,EAAM4C,OAAS,IAEZ2B,IAASC,SAASxE,KAAQsE,EAAS,+BAL5C,kBAQSA,GART,4CAHqB,kEAcrB,WAA2BxE,GAA3B,mBAAAoC,EAAA,6DACMlC,EAAQF,EAAEsB,OAAOpB,MAAMyE,OACvBC,EAAMzE,SAASC,cAAc,eAE7BF,EAAM4C,OAAS,GAAK8B,GACtBA,EAAIC,MAAMC,QAAU,IACpBF,EAAIC,MAAME,UAAY,iBAEtBH,EAAIC,MAAMC,QAAU,IACpBF,EAAIC,MAAME,UAAY,iBAT1B,SAYuBR,EAAYrE,GAZnC,OAYMoE,EAZN,OAaEpC,EAAS,CAAEhC,MAAOA,EAAOoE,SAAUA,IAbrC,4CAdqB,sBAkDrB,OACE,oCACE,yBAAK7E,UAAU,aACb,wBAAIA,UAAU,YAAd,6BACA,wBAAIA,UAAU,YAAd,mCAGF,4BAAKwC,EAAMqC,UACX,yBAAK7E,UAAU,gBACb,0BACEuF,OAAO,OACPxF,OAAO,IACPyF,SAjBR,SAAsBjF,GAftB,IAAkBH,EAgBhBG,EAAEC,iBAhBcJ,EAiBPoC,EAAM/B,MAhBfoC,IACG4C,KAAK,mBAAoB,CACxBrF,QAASA,IAEVsF,MAAK,SAAU3C,GACdE,OAAOC,SAAStB,KAAO,SAAWmB,EAASC,KAAKb,QAEhDwD,QAAQC,IAAI7C,MAEb8C,OAAM,SAAUC,GACfH,QAAQC,IAAIE,OAsBV9F,UAAU,gBAEV,2BACEuE,SAlEW,4CAmEXG,KAAK,UACL3C,KAAK,OACL/B,UAAU,aACV+F,YAAY,oBACZtF,MAAO+B,EAAM/B,MACbuF,UAAQ,IAEV,4BAAQjE,KAAK,SAAS/B,UAAU,cAC9B,uBAAGA,UAAU,qCCvEzB,SAASiG,IACP,OACE,oCACE,wBAAIjG,UAAU,aAAd,OACA,kBAAC,EAAD,O,IAwCSkG,E,uKAjCX,OACE,kBAAC,IAAD,KACE,kBAAC,EAAD,MACA,yBAAKlG,UAAU,aACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO0D,KAAK,UACV,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,KAChB,kBAAC,EAAD,OAGF,kBAAC,IAAD,CAAOyC,UAAWF,MAItB,4BAAQjG,UAAU,UAChB,uBAAGA,UAAU,eACX,uBACE8B,IAAI,sBACJD,OAAO,SACPD,KAAK,yBAHP,mB,GArBMwE,aCZlBC,IAASC,OACR,kBAAC,IAAMC,WAAP,KACC,kBAAC,EAAD,OAED7F,SAAS8F,eAAe,U","file":"static/js/main.f4c5b245.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nimport \"../index.css\";\r\n\r\nfunction HomeBtn() {\r\n  return (\r\n    <form action=\"/\">\r\n      <button className=\"btn-404\">\r\n        <i className=\"fas fa-home fa-2x\" aria-hidden=\"true\"></i>\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default HomeBtn;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useRouteMatch,\r\n  useParams,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport \"../index.css\";\r\nimport axios from \"axios\";\r\n\r\nimport HomeBtn from \"./HomeBtn\";\r\n\r\ninterface UrlType {\r\n  id: string;\r\n}\r\n\r\ntype CardProps = {\r\n  id: string;\r\n  longUrl: string;\r\n  shortUrl: string;\r\n};\r\n\r\ninterface UrlObject {\r\n  _id: string;\r\n  longUrl: string;\r\n  shortUrl: string;\r\n  urlCode: string;\r\n  date: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  __v: number;\r\n}\r\n\r\nfunction Shortened({ id, longUrl, shortUrl }: CardProps) {\r\n  function handleClipboard(e: React.MouseEvent<HTMLElement>) {\r\n    e.preventDefault();\r\n    let toCopy = document.querySelector(\"#clipper\") as HTMLInputElement;\r\n    let value = toCopy.value;\r\n    let tooltip = document.querySelector(\".tooltiptext\");\r\n\r\n    if (tooltip && !tooltip.classList.contains(\"tooltip-visible\")) {\r\n      tooltip.classList.add(\"tooltipAnim\");\r\n      tooltip.classList.add(\"tooltip-visible\");\r\n      setTimeout(() => {\r\n        if (tooltip) {\r\n          tooltip.classList.remove(\"tooltip-visible\");\r\n          tooltip.classList.remove(\"tooltipAnim\");\r\n        }\r\n      }, 1000);\r\n    }\r\n\r\n    copyClipboard(value);\r\n  }\r\n\r\n  function copyClipboard(value: string) {\r\n    let tempInput = document.createElement(\"input\");\r\n    tempInput.value = value;\r\n\r\n    document.body.appendChild(tempInput);\r\n    tempInput.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(tempInput);\r\n  }\r\n\r\n  return (\r\n    <div className=\"url-container\">\r\n      <div className=\"clipboard-wrapper\">\r\n        <div className=\"tooltip\">\r\n          <h2 data-clipboard=\"\" onClick={handleClipboard}>\r\n            Copy to clipboard\r\n          </h2>\r\n          <a data-clipboard=\"\" onClick={handleClipboard} href=\"./#\">\r\n            <i className=\"fas fa-copy\"></i>\r\n          </a>\r\n\r\n          <span className=\"tooltiptext\">Copied!</span>\r\n        </div>\r\n      </div>\r\n      <a\r\n        target=\"_blank\"\r\n        href={longUrl}\r\n        rel=\"noopener noreferrer\"\r\n        className=\"shortened-link heroAnim\"\r\n      >\r\n        xs-url.fr/{id}\r\n      </a>\r\n      <input type=\"hidden\" value={\"http://\" + shortUrl} id=\"clipper\" />\r\n\r\n      <HomeBtn></HomeBtn>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FetchShortened() {\r\n  const [state, setState] = useState<UrlObject>({\r\n    _id: \"\",\r\n    longUrl: \"\",\r\n    shortUrl: \"\",\r\n    urlCode: \"\",\r\n    date: \"\",\r\n    createdAt: \"\",\r\n    updatedAt: \"\",\r\n    __v: 0,\r\n  });\r\n  let { id } = useParams<UrlType>();\r\n\r\n  async function loadUrlData() {\r\n    try {\r\n      let url = \"/api/url/\" + id;\r\n      const response = await axios.get(url);\r\n\r\n      setState(response.data);\r\n    } catch (err) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadUrlData();\r\n  }, [id]);\r\n\r\n  return state._id.length ? (\r\n    <Shortened\r\n      id={state._id}\r\n      longUrl={state.longUrl}\r\n      shortUrl={state.shortUrl}\r\n    />\r\n  ) : (\r\n    <div className=\"hero-text\">\r\n      <h1 className=\"\">Loading...</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ShortenRoute() {\r\n  let match = useRouteMatch();\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path={`${match.url}/:id`}>\r\n        <FetchShortened></FetchShortened>\r\n      </Route>\r\n      <Route path={match.path}>\r\n        <Redirect to=\"/\" />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n}\r\n\r\nexport default ShortenRoute;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"../index.css\";\r\n\r\nfunction Toggler() {\r\n  const [state, setState] = useState({ isDarkMode: false });\r\n\r\n  useEffect(() => {\r\n    let darkThemeSelected =\r\n      localStorage.getItem(\"themeSwitch\") !== null &&\r\n      localStorage.getItem(\"themeSwitch\") === \"dark\";\r\n    let checkbox = document.querySelector(\r\n      \"input[name=theme]\"\r\n    ) as HTMLInputElement;\r\n    if (checkbox) checkbox.checked = darkThemeSelected;\r\n\r\n    darkThemeSelected\r\n      ? document.documentElement.setAttribute(\"data-theme\", \"dark\")\r\n      : document.documentElement.removeAttribute(\"data-theme\");\r\n  });\r\n\r\n  let transitionTheme = () => {\r\n    document.documentElement.classList.add(\"transition\");\r\n    window.setTimeout(() => {\r\n      document.documentElement.classList.remove(\"transition\");\r\n    }, 750);\r\n  };\r\n\r\n  function handleToggler() {\r\n    setState({ isDarkMode: !state.isDarkMode });\r\n\r\n    if (state.isDarkMode) {\r\n      transitionTheme();\r\n      localStorage.setItem(\"themeSwitch\", \"dark\");\r\n      document.documentElement.setAttribute(\"data-theme\", \"dark\");\r\n    } else {\r\n      transitionTheme();\r\n      localStorage.removeItem(\"themeSwitch\");\r\n      document.documentElement.setAttribute(\"data-theme\", \"light\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"toggle-container\">\r\n      <input\r\n        onChange={handleToggler}\r\n        type=\"checkbox\"\r\n        id=\"toggler\"\r\n        name=\"theme\"\r\n      />\r\n      <label htmlFor=\"toggler\">Toggle</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Toggler;\r\n","import React, { useState } from \"react\";\r\nimport \"../index.css\";\r\nimport validUrl from \"valid-url\";\r\nimport axios from \"axios\";\r\n\r\nfunction ShortenForm() {\r\n  const [state, setState] = useState({ value: \"\", errorMsg: \"\" });\r\n\r\n  async function checkErrors(value: string) {\r\n    let errMsg = \"\";\r\n\r\n    if (value.length > 0) {\r\n      // PROPER URL VALIDATION HERE\r\n      if (!validUrl.isWebUri(value)) errMsg = \"URL not properly formatted\";\r\n    }\r\n\r\n    return errMsg;\r\n  }\r\n\r\n  async function handleInput(e: React.ChangeEvent<HTMLInputElement>) {\r\n    let value = e.target.value.trim();\r\n    let btn = document.querySelector(\".search-btn\") as HTMLInputElement;\r\n\r\n    if (value.length > 0 && btn) {\r\n      btn.style.opacity = \"1\";\r\n      btn.style.transform = \"rotate(0deg)\";\r\n    } else {\r\n      btn.style.opacity = \"0\";\r\n      btn.style.transform = \"rotate(45deg)\";\r\n    }\r\n\r\n    let errorMsg = await checkErrors(value);\r\n    setState({ value: value, errorMsg: errorMsg });\r\n  }\r\n\r\n  function postForm(longUrl: string) {\r\n    axios\r\n      .post(\"/api/url/shorten\", {\r\n        longUrl: longUrl,\r\n      })\r\n      .then(function (response) {\r\n        window.location.href = \"/link/\" + response.data.urlCode;\r\n        //redirect to link and pass data\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    postForm(state.value);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"hero-text\">\r\n        <h1 className=\"heroAnim\">Dead simple URL shortener</h1>\r\n        <h2 className=\"heroAnim\">Copy and paste your link below</h2>\r\n      </div>\r\n\r\n      <h1>{state.errorMsg}</h1>\r\n      <div className=\"form-wrapper\">\r\n        <form\r\n          method=\"POST\"\r\n          action=\"/\"\r\n          onSubmit={handleSubmit}\r\n          className=\"shorten-form\"\r\n        >\r\n          <input\r\n            onChange={handleInput}\r\n            name=\"longUrl\"\r\n            type=\"text\"\r\n            className=\"search-txt\"\r\n            placeholder=\"Your link here...\"\r\n            value={state.value}\r\n            required\r\n          />\r\n          <button type=\"submit\" className=\"search-btn\">\r\n            <i className=\"fas fa-arrow fa-arrow-right\"></i>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ShortenForm;\r\n","import React, { Component } from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport \"./index.css\";\r\n\r\nimport HomeBtn from \"./components/HomeBtn\";\r\nimport ShortenRoute from \"./components/ShortenRoute\";\r\nimport Toggler from \"./components/Toggler\";\r\nimport ShortenForm from \"./components/ShortenForm\";\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <>\r\n      <h1 className=\"not-found\">404</h1>\r\n      <HomeBtn></HomeBtn>\r\n    </>\r\n  );\r\n}\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Toggler></Toggler>\r\n        <div className=\"container\">\r\n          <Switch>\r\n            <Route path=\"/link/\">\r\n              <ShortenRoute></ShortenRoute>\r\n            </Route>\r\n\r\n            <Route exact path=\"/\">\r\n              <ShortenForm></ShortenForm>\r\n            </Route>\r\n\r\n            <Route component={NotFound} />\r\n          </Switch>\r\n        </div>\r\n\r\n        <footer className=\"invert\">\r\n          <p className=\"footer-text\">\r\n            <a\r\n              rel=\"noopener noreferrer\"\r\n              target=\"_blank\"\r\n              href=\"https://www.ablin.dev\"\r\n            >\r\n              @ablin42\r\n            </a>\r\n          </p>\r\n        </footer>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n//import * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n//serviceWorker.unregister();\r\n"],"sourceRoot":""}